name: release-please

on:
  push:
    branches:
      - main

permissions:
  contents: write
  pull-requests: write

jobs:
  release-please:
    runs-on: ubuntu-latest
    steps:
      - uses: google-github-actions/release-please-action@v3.7.5
        with:
          default-branch: main
          release-type: simple

          release-as: 0.1.0 # TODO: Remove after initial Release PR.

          # TODO: Once plugin API stabilizes, switch these to 'false'.
          bump-minor-pre-major: true
          bump-patch-for-minor-pre-major: true

          # To support 'plugin.cfg', use the generic updater on the file
          # 'plugin.cfg'. The version must be identified using using an
          # inline or block comment (e.g. 'x-release-please-version').
          #
          # See https://github.com/googleapis/release-please/blob/HEAD/docs/customizing.md#updating-arbitrary-files.
          extra-files: |
            addons/example-plugin/plugin.cfg
